# Kurikulum mobile pentest

Sistem Operasi: Windows 11 latest patch (14/11/2022)

* Persyaratan
  * Install [Git](https://git-scm.com/download/win)
  * Install [NoxPlayer](https://www.bignox.com/blog/)
  * Install [Python + Pip](https://www.liquidweb.com/kb/install-pip-windows/)
  * Install [Burp Suite Community](https://portswigger.net/burp/communitydownload)
  * Extract [adb](https://dl.google.com/android/repository/platform-tools-latest-windows.zip)
  
* Nox Player
	* Menjalankan emulator
	* Install app kesayangan (apapun seperti PeduliLindungi, MyPertamina)
	* Network settings
	* Enable root access
	* Enable GPS
	
* Android Debugger
	* Konek dari PC ke android nox
	* Perintah: adb pull, push, shell
	* Shell: cp, mv, ls, cat, chmod, etc
	* Buka SQLite
	* LogCat
	
* HTTP API sniffing (basic)
	* Download burp cert dan install sbg user
	* Re-mount root cert ke system
	* Jalankan burp suite
	* Install proxydroid
	* Proxydroid to burp suite connect
	* Install [app ini](https://github.com/dineshshetty/Android-InsecureBankv2)
	* Gunakan dan lihat di burp suite
	
* Understanding HTTPs Protocol
	* Basic encryption: Symmetric & Asymmetric
	* TLS Handshake
	* Certificate Validation
	* Buka facebook.com dari browser
	* Lihat HTTPs pada burp suite
	* Certificate Pinning
	* mTLS verification
	* Sample error
	
* Reversing
	* Install & Config [MobSF](https://github.com/MobSF/Mobile-Security-Framework-MobSF)
	* Install APK extractor
	* Baca source code
	* Edit apk + re-packaging (apktool, keytool, jarsigner)

```
apktool d <file.apk>
apktool b -f -d <foldernya>
keytool -genkey -v -keystore ctf.keystore -alias ctfKeystore -keyalg RSA -keysize 2048 -validity 10000
jarsigner -verbose -keystore ctf.keystore <file apk baru> ctfKeystore
jarsigner -verify -verbose -certs <file apk baru> 
```
	
* AndroidManifest.xml exploit
	* Concept of android permission
	* Exported Activity
	`adb shell am start -n com.android.insecurebankv2/com.android.insecurebankv2.PostLogin`
	* Exported Content
	`adb shell content query --uri content://com.android.insecurebankv2.TrackUserContentProvider/trackerusers`
	* Broadcast Receiver
	`am broadcast -a theBroadcast -n com.android.insecurebankv2/.MyBroadCastReceiver –es phonenumber 5556  –es newpass supersecurepass`
	* Exposed Service
	`adb shell am startservice com.some.package.name/.YourServiceSubClassName`
	
* MobSF dynamic analysis
	* Selayang Pandang + Konsep
	* Setup
	* Mencoba app" real

* Frida 
	* Konsep frida
	* Install & Konfigurasi frida
	* Menjalankan script bypass SSL/TLS. [Reference](https://infosecwriteups.com/hail-frida-the-universal-ssl-pinning-bypass-for-android-e9e1d733d29)
	
* APK Patching
	* Install & Konfigurasi [objection](https://github.com/sensepost/objection)
	* Install & Konfigurasi [reflutter](https://l33t-en0ugh.gitbook.io/infosec/android-pentesting/bypass-ssl-pinning-for-flutter-apps-using-reflutter-framework)
	* Install & Konfigurasi [apk-mitm](https://l33t-en0ugh.gitbook.io/infosec/android-pentesting/easy-way-to-bypass-ssl-pinning-using-apk-mitm-tool)
	
* Android Studio
	* Pengenalan dasar
	* Hello World app
	* Client-side exploit

* Good resources
	* https://l33t-en0ugh.gitbook.io/infosec/android-pentesting
	* https://github.com/habibiefaried/Android-InsecureBankv2/tree/master/Walkthroughs
	* https://akshanshjaiswal.medium.com/vuldroid-app-walkthrough-8f8e4511cad5
	* https://github.com/B3nac/InjuredAndroid/blob/master/InjuredAndroid-FlagWalkthroughs.md
